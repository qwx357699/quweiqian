(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{467:function(t,e,v){"use strict";v.r(e);var _=v(10),s=Object(_.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_3-在本地环境配置-https-证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-在本地环境配置-https-证书"}},[t._v("#")]),t._v(" 3. 在本地环境配置 "),e("em",[t._v("https")]),t._v(" 证书")]),t._v(" "),e("p",[t._v("在使用 "),e("em",[t._v("HTML5")]),t._v(" 的 "),e("em",[t._v("API")]),t._v(" 时，很多 "),e("em",[t._v("API")]),t._v(" 只能在 "),e("em",[t._v("https")]),t._v(" 保证安全的情况下才能开启。这就要求我们在本地开发环境也能够配置 "),e("em",[t._v("https")]),t._v("，否则你需要每次部署到配有 "),e("em",[t._v("https")]),t._v(" 的测试环境中才能看到预览效果，这对开发的敏捷度造成了极大的干扰。")]),t._v(" "),e("p",[t._v("本文和 "),e("em",[t._v("WebApp")]),t._v(" 的内容没有太大关系，属于独立内容，主要解决 "),e("em",[t._v("HTML5")]),t._v(" 中有很多 "),e("em",[t._v("API")]),t._v(" 需要在 "),e("em",[t._v("https")]),t._v(" 的条件下才能生效的问题，会介绍如何在本地环境配置 "),e("em",[t._v("https")]),t._v(" 证书。")]),t._v(" "),e("h2",{attrs:{id:"使用-mkcert"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-mkcert"}},[t._v("#")]),t._v(" 使用 "),e("em",[t._v("mkcert")])]),t._v(" "),e("p",[e("em",[t._v("mkcert")]),t._v(" 是一个用 "),e("em",[t._v("GO")]),t._v(" 写的零配置专门用来本地环境 "),e("em",[t._v("https")]),t._v(" 证书生成的工具。")]),t._v(" "),e("p",[t._v("文档地址："),e("em",[t._v("https://gitcode.net/mirrors/FiloSottile/mkcert?utm_source=csdn_github_accelerator")])]),t._v(" "),e("p",[e("em",[t._v("macOS、Linux、Windows")]),t._v(" 均可安装。")]),t._v(" "),e("p",[t._v("因为谢老师使用的是 "),e("em",[t._v("macOS")]),t._v("，所以这里简单记录 "),e("em",[t._v("macOS")]),t._v(" 下的安装过程。")]),t._v(" "),e("p",[t._v("要安装 "),e("em",[t._v("mkcert")]),t._v("，官方推荐的命令很简单，使用 "),e("em",[t._v("Homebrew")]),t._v(" 来进行安装：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("brew "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" mkcert\n")])])]),e("blockquote",[e("p",[t._v("备注："),e("em",[t._v("Homebrew")]),t._v(" 是 "),e("em",[t._v("macOS")]),t._v(" 上的软件包的管理器，类似于大家在 "),e("em",[t._v("Node.js")]),t._v(" 环境中熟悉的 "),e("em",[t._v("npm")]),t._v("。")])]),t._v(" "),e("p",[t._v("需要注意的是，目前由于国内的特殊环境，可以使用国内镜像安装。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("/bin/zsh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-fsSL")]),t._v(" https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v('"')]),t._v("\n")])])]),e("p",[e("img",{attrs:{src:"https://qwx357699.github.io/resource/imgs/e6c9d24ely1h2035vb4w2j21tk0lo78a.jpg",alt:"image-20220507195441074"}})]),t._v(" "),e("p",[t._v("安装完 "),e("em",[t._v("Homebrew")]),t._v(" 之后，就可以执行刚才所提到的 "),e("em",[t._v("brew install mkcert")]),t._v(" 来安装 "),e("em",[t._v("mkcert")]),t._v("。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://qwx357699.github.io/resource/imgs/2022-05-07-115517.png",alt:"image-20220507195517321"}})]),t._v(" "),e("p",[t._v("安装完成后，执行")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("mkcert "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-install")]),t._v("\n")])])]),e("p",[t._v("该命令会在您的本机安装一个证书中心，用于颁发证书，示例如下：")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://qwx357699.github.io/resource/imgs/2022-05-07-115530.png",alt:"image-20220507195530536"}}),t._v(" "),e("p",[t._v("通过 "),e("em",[t._v("mkcert --CAROOT")]),t._v(" 可以查看证书中心的存放位置，如下图所示：")]),t._v(" "),e("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://qwx357699.github.io/resource/imgs/2022-05-07-115554.png",alt:"image-20220507195554118"}}),t._v(" "),e("p",[t._v("至此，我们的证书中心就搞定了，之后可以在具体的项目中生成证书文件和私钥。")]),t._v(" "),e("h2",{attrs:{id:"在具体项目中生成证书文件和私钥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在具体项目中生成证书文件和私钥"}},[t._v("#")]),t._v(" 在具体项目中生成证书文件和私钥")]),t._v(" "),e("p",[t._v("通过上面的步骤，我们在本机上安装了 "),e("em",[t._v("CA")]),t._v("（刚才的证书中心），接下来 "),e("em",[t._v("cd")]),t._v(" 到需要生成凭证的目录下，通过 "),e("em",[t._v("mkcert")]),t._v(" 命令来生成证书文件和私钥。示例如下：")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://qwx357699.github.io/resource/imgs/2022-05-07-115616.png",alt:"image-20220507195616470"}})]),t._v(" "),e("p",[t._v("在上面的操作中，我们针对 "),e("em",[t._v("localhost、127.0.0.1、192.168.101.26")]),t._v(" 这 "),e("em",[t._v("3")]),t._v(" 个地址生成了证书文件和私钥，其中 "),e("em",[t._v("./localhost+2.pem")]),t._v(" 就是证书文件，"),e("em",[t._v("./localhost+2-key.pem")]),t._v(" 就是私钥文件。并且这两个文件都有过期时间。")]),t._v(" "),e("p",[t._v("我们也可以打开生成证书的目录，可以看到在该目录下已经存在了这 "),e("em",[t._v("2")]),t._v(" 个文件。")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://qwx357699.github.io/resource/imgs/2022-05-07-115633.png",alt:"image-20220507195632327"}}),t._v(" "),e("h2",{attrs:{id:"在-live-server-中配置-https-环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在-live-server-中配置-https-环境"}},[t._v("#")]),t._v(" 在 "),e("em",[t._v("live server")]),t._v(" 中配置 "),e("em",[t._v("https")]),t._v(" 环境")]),t._v(" "),e("p",[t._v("因为我们的项目很多时候是以 "),e("em",[t._v("live server")]),t._v(" 的形式打开，因此我们可以在 "),e("em",[t._v("live server")]),t._v(" 中配置以 "),e("em",[t._v("https")]),t._v(" 打开项目。")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://qwx357699.github.io/resource/imgs/2022-05-07-115648.png",alt:"image-20220507195648343"}}),t._v(" "),e("p",[t._v("在扩展中找到 "),e("em",[t._v("live server")]),t._v(" 对应的配置项：")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://qwx357699.github.io/resource/imgs/2022-05-07-115711.png",alt:"image-20220507195710916"}}),t._v(" "),e("p",[t._v("将 "),e("em",[t._v("enable")]),t._v(" 修改为 "),e("em",[t._v("true")]),t._v("，然后填写 "),e("em",[t._v("cert")]),t._v(" 和 "),e("em",[t._v("key")]),t._v(" 的地址即可，填写完成后最好重启一下 "),e("em",[t._v("vscode")]),t._v("。")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://qwx357699.github.io/resource/imgs/2022-05-07-115729.png",alt:"image-20220507195729079"}}),t._v(" "),e("p",[t._v("配置完成后，之后使用 "),e("em",[t._v("live server")]),t._v(" 重新打开项目时，就会以 "),e("em",[t._v("https")]),t._v(" 的形式来打开项目。")]),t._v(" "),e("blockquote",[e("p",[t._v("其他环境中要配置 "),e("em",[t._v("https")]),t._v("，可以参阅："),e("em",[t._v("https://www.codingsky.com/m/doc/2021/8/24/116.html")])])]),t._v(" "),e("p",[t._v("-"),e("em",[t._v("EOF")]),t._v("-")])])}),[],!1,null,null,null);e.default=s.exports}}]);